## Маленький проект Python по парсингу нужных вакансий на HeadHunter.

### Описание пректа.

Во время поиска работы я столкнулся с тем, что конверсия откликов в собеседования - величина весьма незначительная. Платить за аналитику HH при специальности DA - глупость несусветная. Поэтому решил сам вести свою БД и делать собственную аналитику. Развернуть БД на бесплатном хостинге сейчас не представляет никаких сложностей. Можно, конечно, поднять локальную БД - что и сделал для начала. Но потом столкнулся с неудобством синхронизации - я пользуюсь разными компами дома и на даче. Поэтому пришлось искать вариант онлайн. 
<br>Я выбрал NEON (не реклама, поэтому без ссылки) - хорошо знакомый PostgreSQL с нормальной документацией. Правда, достаточно быстро столкнулся с повышенным вниманием со стороны их представителя, весьма вежливыми, но настойчивыми имейлами в стиле "как дела, друг". Цель этих писем просматривалась довольно явно - перевести меня на один из платных тарифов. Решилось одним ответным имейлом, что с моими скромными потребностями шансы увидеть меня в дружных рядах коммерческих пользователей равны нулю.
<br>Достаточно быстро надоело перекидывать "ручками" информацию из браузера для занесения в БД. Озадачился вопросом автоматизации этого процесса. А вот документация по API hh.ru оставляет желать лучшего. Поэтому решил описать, как и что надо делать.

### Часть I. Подготовительная работа.

По времени это самая затратная часть проекта.

1.  Перво-наперво необходимо быть зарегистрированным пользователем <a href="https://hh.ru/">HeadHunter</a>, без этого никак. Зарегистрировались.
2.  Теперь самая продолжительная часть - идем регистрировать свое приложение (скрипт) <a href="https://dev.hh.ru/admin">в личном кабинете HeadHunter</a>. Жмем кнопку "Регистрация нового приложения". Заполняем короткую форму и ждем. Единственное, с чем могут возникнуть вопросы в этой форме - `Redirect URI`. Если не знаете, что написать - пишите `https://hh.ru`.<br>В вопросе про использование API просто описал, что будет делать скрипт, ничего не перечислял. Я так понимаю, этот пункт больше для кадровых агентств и работодателей, часть функций сделали платными.<br>На само ожидание у меня ушло больше суток. Получаем имейл с подтверждением. Вот теперь почти все.
4.  Пишем коротенький <a href="https://github.com/ML-rus/ML_projects/blob/main/HeadHunter/Get_hh_token_from_server.ipynb">скрипт</a> на post-запрос. В значения ключей `client_id` и `client_secret` заносим информацию из <a href="https://dev.hh.ru/admin">личного кабинета HeadHunter</a>. Выполняем. Если скопировали все без ошибок - получаем код 200 и в тексте ответа содержится заветный токен, сохраняем его. На этом этапе все.

### Часть II. Парсинг.

У нас есть токен и мы можем запрашивать информацию на HH. Кстати, если вы его не сохранили или сохранили не весь - это не проблема, теперь он тоже находится <a href="https://dev.hh.ru/admin">в личном кабинете HeadHunter</a>.

<b>Я настоятельно не рекомендую хранить токен в открытом виде</b> - это весьма опрометчиво. Я написал отдельно функцию по его получению, чтобы со стороны не были понятны механизм хранения и способ его получения в открытом виде - так безопаснее.

Наконец, можно переходить собственно к парсингу. Пишем еще один <a href="https://github.com/ML-rus/ML_projects/blob/main/HeadHunter/My_hh.ipynb">скрипт</a>, который по ID вакансии получает всю возможную информацию о ней. Ответ приходит в формате json, что очень удобно, нет нужды заниматься суповарением.

Работает все так: я просмртриваю вакансии и просто копирую ID тех, которые меня заинтересовали, в обычную строку. За день таких много не бывает.

Один раз столкнулся с тем, что в названии компании была целая поэма, что-то вроде "Название .... Подразделение ... Департамента... Дирекции... etc." (Back in USSR?). Не влезло в мою БД. Теперь сразу обрезаю до 60 символов.

Отдельно хочу коснуться темы сопроводительных писем - все любят персональное обращение. Но при этом на 80%, а то и больше, текст письма одинаковый для разных компаний. Поэтому <a href="https://github.com/ML-rus/ML_projects/blob/main/HeadHunter/My_hh.ipynb">скрипт</a> избавил меня от еще одной рутины - он копирует в буфер обмена персонифицированные Cover Letter. Остается их вставить (win+v) в выбранные вакансии, подправить немного, если это необходимо - и можно отправлять.

При наличии всего json-а из него можно получить значительно больше информации, чем я привел в своем примере - все зависит от ваших потребностей.

Я изначально не рассматривал возможность автоматического поиска вакансий, предпочитаю их читать сам, оценивать, стоит откликаться или нет. А автоматизированная обработка вакансий и рассылка откликов похожа на спам. К тому же я изначально, при регистрации приложения, не заявлял как цель массовую обработку вакансий или массовую рассылку откликов.

Но вы можете попробовать, если считаете необходимым, сделать это сами - API HH предоставляет намного больше возможностей, чем использовал я. Главное указать при регистрации свои реальные цели во избежание неприятных последствий.

Теперь все.

<hr>

<i>P.S. Вся информация актуальна по состоянию на конец 2023 года.</i>
